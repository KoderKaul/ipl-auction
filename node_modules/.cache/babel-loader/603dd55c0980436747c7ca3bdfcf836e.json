{"ast":null,"code":"var _jsxFileName = \"/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinRoom.styles\";\nimport { Typography, TextField, Container, Button, Toolbar, AppBar, IconButton } from \"@material-ui/core\";\nimport MenuIcon from '@material-ui/icons/Menu';\n\nfunction JoinRoom() {\n  _s();\n\n  const classes = useStyles();\n  const [myRoom, setMyRoom] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase.database().ref(\"myRooms/\").on(\"value\", resp => {\n        setMyRoom([]);\n        setMyRoom(snapshotToArray(resp));\n        setShowLoading(false);\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = snapshot => {\n    const returnArr = [];\n    snapshot.forEach(childSnapshot => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n    return returnArr;\n  };\n\n  const enterChatmyRoom = myRoomname => {\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\"\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n    firebase.database().ref(\"myRoomusers/\").orderByChild(\"myRoomname\").equalTo(myRoomname).on(\"value\", resp => {\n      let myRoomuser = [];\n      myRoomuser = snapshotToArray(resp);\n      const user = myRoomuser.find(x => x.nickName === nickName);\n\n      if (user !== undefined) {\n        const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n        userRef.update({\n          status: \"online\"\n        });\n      } else {\n        const newmyRoomuser = {\n          myRoomname: \"\",\n          nickname: \"\",\n          status: \"\"\n        };\n        newmyRoomuser.myRoomname = myRoomname;\n        newmyRoomuser.nickName = nickName;\n        newmyRoomuser.status = \"online\";\n        const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n        newmyRoomUser.set(newmyRoomuser);\n      }\n    });\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    edge: \"start\",\n    className: classes.menuButton,\n    color: \"inherit\",\n    \"aria-label\": \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MenuIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, \"Welcome to IPL Auction\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"Login\"))), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Welcome to IPL Auction \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.innerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: \"Name\",\n    variant: \"outlined\",\n    fullWidth: true,\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    },\n    value: myRoom,\n    onChange: e => {\n      setMyRoom(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.submitButton,\n    color: \"primary\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 11\n    }\n  }, \"Join\"))));\n}\n\n_s(JoinRoom, \"OZfZLHhvdEqnTX6y87KQgNLdQGQ=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = JoinRoom;\nexport default JoinmyRoom;\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinRoom\");","map":{"version":3,"sources":["/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js"],"names":["React","useState","useEffect","Link","useHistory","Moment","firebase","useStyles","Typography","TextField","Container","Button","Toolbar","AppBar","IconButton","MenuIcon","JoinRoom","classes","myRoom","setMyRoom","showLoading","setShowLoading","nickName","setNickName","history","fetchData","localStorage","getItem","database","ref","on","resp","snapshotToArray","snapshot","returnArr","forEach","childSnapshot","item","val","key","push","enterChatmyRoom","myRoomname","chat","message","date","type","Date","format","newMessage","set","orderByChild","equalTo","myRoomuser","user","find","x","undefined","userRef","update","status","newmyRoomuser","nickname","newmyRoomUser","logout","removeItem","mainContainer","menuButton","title","innerContainer","shrink","e","target","value","submitButton","JoinmyRoom"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinRoom.styles\";\nimport { Typography, TextField, Container, Button, Toolbar, AppBar, IconButton,  } from \"@material-ui/core\";\nimport MenuIcon from '@material-ui/icons/Menu';\n\nfunction JoinRoom() {\n  const classes = useStyles();\n  const [myRoom, setMyRoom] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase\n        .database()\n        .ref(\"myRooms/\")\n        .on(\"value\", (resp) => {\n          setMyRoom([]);\n          setMyRoom(snapshotToArray(resp));\n          setShowLoading(false);\n        });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = (snapshot) => {\n    const returnArr = [];\n\n    snapshot.forEach((childSnapshot) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n\n    return returnArr;\n  };\n\n  const enterChatmyRoom = (myRoomname) => {\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\",\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n\n    firebase\n      .database()\n      .ref(\"myRoomusers/\")\n      .orderByChild(\"myRoomname\")\n      .equalTo(myRoomname)\n      .on(\"value\", (resp) => {\n        let myRoomuser = [];\n        myRoomuser = snapshotToArray(resp);\n        const user = myRoomuser.find((x) => x.nickName === nickName);\n        if (user !== undefined) {\n          const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n          userRef.update({ status: \"online\" });\n        } else {\n          const newmyRoomuser = { myRoomname: \"\", nickname: \"\", status: \"\" };\n          newmyRoomuser.myRoomname = myRoomname;\n          newmyRoomuser.nickName = nickName;\n          newmyRoomuser.status = \"online\";\n          const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n          newmyRoomUser.set(newmyRoomuser);\n        }\n      });\n\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return (\n    <div className={classes.mainContainer}>\n    <AppBar position=\"static\">\n        <Toolbar>\n          <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\">\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            Welcome to IPL Auction \n          </Typography>\n          <Button color=\"inherit\">Login</Button>\n        </Toolbar>\n      </AppBar>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Typography variant=\"h3\">Welcome to IPL Auction </Typography>\n        <div className={classes.innerContainer}>\n          <TextField\n            label=\"Name\"\n            variant=\"outlined\"\n            fullWidth\n            required={true}\n            InputLabelProps={{ shrink: true }}\n            value={myRoom}\n            onChange={(e) => {\n              setMyRoom(e.target.value);\n            }}\n          />\n\n          <Button\n            className={classes.submitButton}\n            color=\"primary\"\n            \n            fullWidth\n          >\n            Join\n          </Button>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default JoinmyRoom;\n\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */\n"]},"metadata":{},"sourceType":"module"}