{"ast":null,"code":"var _jsxFileName = \"/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinRoom.styles\";\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport { Typography, TextField, Container, Button, Toolbar, AppBar, IconButton, Paper, Collapse } from \"@material-ui/core\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport Alert from '@material-ui/lab/Alert';\nimport rr from \"../../img/rr.jpg\";\nimport csk from \"../../img/csk.jpg\";\nimport rcb from \"../../img/rcb.jpg\";\nimport mi from \"../../img/mi.jpg\";\nimport kxip from \"../../img/kxip.jpg\";\nimport dc from \"../../img/dc.jpg\";\nimport kkr from \"../../img/kkr.jpg\";\nimport ipl from \"../../img/ipl.png\";\n\nfunction JoinRoom() {\n  _s();\n\n  const classes = useStyles();\n  const [myRoom, setMyRoom] = useState('');\n  const [rooms, setRooms] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n  const [open, setOpen] = useState(true);\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase.database().ref(\"rooms/\").on(\"value\", resp => {\n        setRooms([]);\n        setRooms(snapshotToArray(resp));\n        setShowLoading(false);\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = snapshot => {\n    const returnArr = [];\n    snapshot.forEach(childSnapshot => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n    return returnArr;\n  };\n\n  const enterChatmyRoom = myRoomname => {\n    console.log(rooms);\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\"\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n    firebase.database().ref(\"myRoomusers/\").orderByChild(\"myRoomname\").equalTo(myRoomname).on(\"value\", resp => {\n      let myRoomuser = [];\n      myRoomuser = snapshotToArray(resp);\n      const user = myRoomuser.find(x => x.nickName === nickName);\n\n      if (user !== undefined) {\n        const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n        userRef.update({\n          status: \"online\"\n        });\n      } else {\n        const newmyRoomuser = {\n          myRoomname: \"\",\n          nickname: \"\",\n          status: \"\"\n        };\n        newmyRoomuser.myRoomname = myRoomname;\n        newmyRoomuser.nickName = nickName;\n        newmyRoomuser.status = \"online\";\n        const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n        newmyRoomUser.set(newmyRoomuser);\n      }\n    });\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  const checkRoom = () => {\n    console.log(rooms);\n    const existingRoom = rooms.find(room => room.roomname === myRoom);\n\n    if (existingRoom) {\n      enterChatmyRoom(myRoom);\n    } else {\n      setOpen(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(AppBar, {\n    position: \"static\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Toolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    className: classes.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Welcome \", nickName, \" to IPL Auction Presented by DORA\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"inherit\",\n    onClick: logout,\n    endIcon: /*#__PURE__*/React.createElement(ExitToAppIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 61\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, \"Logout\"))), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: classes.innerContainer,\n    square: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, nickName === \"AdMiN69\" ? /*#__PURE__*/React.createElement(Link, {\n    to: \"/addroom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: ipl,\n    className: classes.iplLogo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  })) : /*#__PURE__*/React.createElement(\"img\", {\n    src: ipl,\n    className: classes.iplLogo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    label: \"Room\",\n    variant: \"outlined\",\n    placeholder: \"Room\",\n    fullWidth: true,\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    },\n    value: myRoom,\n    onChange: e => {\n      setMyRoom(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    fullWidth: true,\n    className: classes.submitButton,\n    onClick: checkRoom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, \"Join\"), /*#__PURE__*/React.createElement(Collapse, {\n    in: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    action: /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"close\",\n      color: \"inherit\",\n      size: \"small\",\n      onClick: () => {\n        setOpen(false);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, \"Close me!\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.imgContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: rr,\n    className: classes.teamImg1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: csk,\n    className: classes.teamImg2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: rcb,\n    className: classes.teamImg3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: mi,\n    className: classes.teamImg4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: dc,\n    className: classes.teamImg3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: kxip,\n    className: classes.teamImg2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: kkr,\n    className: classes.teamImg1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 9\n    }\n  })));\n}\n\n_s(JoinRoom, \"WbUGooz+MZcMFw3QGD4K3xpZSaE=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = JoinRoom;\nexport default JoinRoom;\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinRoom\");","map":{"version":3,"sources":["/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js"],"names":["React","useState","useEffect","Link","useHistory","Moment","firebase","useStyles","ExitToAppIcon","Typography","TextField","Container","Button","Toolbar","AppBar","IconButton","Paper","Collapse","CloseIcon","Alert","rr","csk","rcb","mi","kxip","dc","kkr","ipl","JoinRoom","classes","myRoom","setMyRoom","rooms","setRooms","showLoading","setShowLoading","nickName","setNickName","history","open","setOpen","fetchData","localStorage","getItem","database","ref","on","resp","snapshotToArray","snapshot","returnArr","forEach","childSnapshot","item","val","key","push","enterChatmyRoom","myRoomname","console","log","chat","message","date","type","Date","format","newMessage","set","orderByChild","equalTo","myRoomuser","user","find","x","undefined","userRef","update","status","newmyRoomuser","nickname","newmyRoomUser","logout","removeItem","checkRoom","existingRoom","room","roomname","mainContainer","title","innerContainer","iplLogo","shrink","e","target","value","submitButton","imgContainer","teamImg1","teamImg2","teamImg3","teamImg4"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinRoom.styles\";\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport {\n  Typography,\n  TextField,\n  Container,\n  Button,\n  Toolbar,\n  AppBar,\n  IconButton,\n  Paper,\n  Collapse,\n} from \"@material-ui/core\";\nimport CloseIcon from '@material-ui/icons/Close';\nimport Alert from '@material-ui/lab/Alert';\nimport rr from \"../../img/rr.jpg\";\nimport csk from \"../../img/csk.jpg\";\nimport rcb from \"../../img/rcb.jpg\";\nimport mi from \"../../img/mi.jpg\";\nimport kxip from \"../../img/kxip.jpg\";\nimport dc from \"../../img/dc.jpg\";\nimport kkr from \"../../img/kkr.jpg\";\nimport ipl from \"../../img/ipl.png\";\n\nfunction JoinRoom() {\n  const classes = useStyles();\n  const [myRoom, setMyRoom] = useState('');\n  const [rooms, setRooms] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n  const [open, setOpen] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase\n        .database()\n        .ref(\"rooms/\")\n        .on(\"value\", (resp) => {\n            setRooms([]);\n            setRooms(snapshotToArray(resp));\n          setShowLoading(false);\n        });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = (snapshot) => {\n    const returnArr = [];\n\n    snapshot.forEach((childSnapshot) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n\n    return returnArr;\n  };\n\n  const enterChatmyRoom = (myRoomname) => {\n\n    console.log(rooms)\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\",\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n\n    firebase\n      .database()\n      .ref(\"myRoomusers/\")\n      .orderByChild(\"myRoomname\")\n      .equalTo(myRoomname)\n      .on(\"value\", (resp) => {\n        let myRoomuser = [];\n        myRoomuser = snapshotToArray(resp);\n        const user = myRoomuser.find((x) => x.nickName === nickName);\n        if (user !== undefined) {\n          const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n          userRef.update({ status: \"online\" });\n        } else {\n          const newmyRoomuser = { myRoomname: \"\", nickname: \"\", status: \"\" };\n          newmyRoomuser.myRoomname = myRoomname;\n          newmyRoomuser.nickName = nickName;\n          newmyRoomuser.status = \"online\";\n          const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n          newmyRoomUser.set(newmyRoomuser);\n        }\n      });\n\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  const checkRoom = () => {\n    console.log(rooms);\n    const existingRoom = rooms.find((room) => room.roomname === myRoom);\n\n    if(existingRoom){\n        enterChatmyRoom(myRoom);\n    }else{\n        setOpen(true);\n    }\n  }\n\n  return (\n    <div className={classes.mainContainer}>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h6\" className={classes.title}>\n            Welcome {nickName} to IPL Auction Presented by DORA\n          </Typography>\n          <Button color=\"inherit\" onClick={logout} endIcon={<ExitToAppIcon/>}>\n            Logout\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Paper className={classes.innerContainer} square>\n          {nickName === \"AdMiN69\" ? (\n            <Link to=\"/addroom\">\n              <img src={ipl} className={classes.iplLogo} />\n            </Link>\n          ) : (\n            <img src={ipl} className={classes.iplLogo} />\n          )}\n\n          <TextField\n            label=\"Room\"\n            variant=\"outlined\"\n            placeholder=\"Room\"\n            fullWidth\n            required={true}\n            InputLabelProps={{ shrink: true }}\n            value={myRoom}\n            onChange={(e) => {\n              setMyRoom(e.target.value);\n            }}\n          />\n          <Button\n            color=\"primary\"\n            variant=\"contained\"\n            fullWidth\n            className={classes.submitButton}\n            onClick={checkRoom}\n          >\n            Join\n          </Button>\n          <Collapse in={open}>\n        <Alert\n          action={\n            <IconButton\n              aria-label=\"close\"\n              color=\"inherit\"\n              size=\"small\"\n              onClick={() => {\n                setOpen(false);\n              }}\n            >\n              <CloseIcon fontSize=\"inherit\" />\n            </IconButton>\n          }\n        >\n          Close me!\n        </Alert>\n      </Collapse>\n        </Paper>\n      </Container>\n      <div className={classes.imgContainer}>\n        <img src={rr} className={classes.teamImg1} />\n        <img src={csk} className={classes.teamImg2} />\n        <img src={rcb} className={classes.teamImg3} />\n        <img src={mi} className={classes.teamImg4} />\n        <img src={dc} className={classes.teamImg3} />\n        <img src={kxip} className={classes.teamImg2} />\n        <img src={kkr} className={classes.teamImg1} />\n      </div>\n    </div>\n  );\n}\n\nexport default JoinRoom;\n\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */"]},"metadata":{},"sourceType":"module"}