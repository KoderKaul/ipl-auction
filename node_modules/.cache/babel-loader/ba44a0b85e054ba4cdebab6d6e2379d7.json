{"ast":null,"code":"var _jsxFileName = \"/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinmyRoom.styles\";\nimport { Typography, TextField, Container, Button } from \"@material-ui/core\";\n\nfunction JoinmyRoom() {\n  _s();\n\n  const classes = useStyles();\n  const [myRoom, setMy] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase.database().ref(\"myRooms/\").on(\"value\", resp => {\n        setMy([]);\n        setMy(snapshotToArray(resp));\n        setShowLoading(false);\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = snapshot => {\n    const returnArr = [];\n    snapshot.forEach(childSnapshot => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n    return returnArr;\n  };\n\n  const enterChatmyRoom = myRoomname => {\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\"\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n    firebase.database().ref(\"myRoomusers/\").orderByChild(\"myRoomname\").equalTo(myRoomname).on(\"value\", resp => {\n      let myRoomuser = [];\n      myRoomuser = snapshotToArray(resp);\n      const user = myRoomuser.find(x => x.nickName === nickName);\n\n      if (user !== undefined) {\n        const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n        userRef.update({\n          status: \"online\"\n        });\n      } else {\n        const newmyRoomuser = {\n          myRoomname: \"\",\n          nickname: \"\",\n          status: \"\"\n        };\n        newmyRoomuser.myRoomname = myRoomname;\n        newmyRoomuser.nickName = nickName;\n        newmyRoomuser.status = \"online\";\n        const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n        newmyRoomUser.set(newmyRoomuser);\n      }\n    });\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Welcome to IPL Auction \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.innerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: \"Name\",\n    variant: \"outlined\",\n    fullWidth: true,\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    },\n    value: mymyRoom,\n    onChange: e => {\n      setMymyRoom(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.submitButton,\n    color: \"primary\",\n    onClick: handleSubmit,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Join\"))));\n}\n\n_s(JoinmyRoom, \"TxhiMfW5lUR5ZZb2Kx59wFNzcTA=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = JoinmyRoom;\nexport default JoinmyRoom;\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */\n\nvar _c;\n\n$RefreshReg$(_c, \"JoinmyRoom\");","map":{"version":3,"sources":["/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js"],"names":["React","useState","useEffect","Link","useHistory","Moment","firebase","useStyles","Typography","TextField","Container","Button","JoinmyRoom","classes","myRoom","setMy","showLoading","setShowLoading","nickName","setNickName","history","fetchData","localStorage","getItem","database","ref","on","resp","snapshotToArray","snapshot","returnArr","forEach","childSnapshot","item","val","key","push","enterChatmyRoom","myRoomname","chat","message","date","type","Date","format","newMessage","set","orderByChild","equalTo","myRoomuser","user","find","x","undefined","userRef","update","status","newmyRoomuser","nickname","newmyRoomUser","logout","removeItem","mainContainer","innerContainer","shrink","mymyRoom","e","setMymyRoom","target","value","submitButton","handleSubmit"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./JoinmyRoom.styles\";\nimport { Typography, TextField, Container, Button } from \"@material-ui/core\";\n\nfunction JoinmyRoom() {\n  const classes = useStyles();\n  const [myRoom, setMy] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase\n        .database()\n        .ref(\"myRooms/\")\n        .on(\"value\", (resp) => {\n          setMy([]);\n          setMy(snapshotToArray(resp));\n          setShowLoading(false);\n        });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = (snapshot) => {\n    const returnArr = [];\n\n    snapshot.forEach((childSnapshot) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n\n    return returnArr;\n  };\n\n  const enterChatmyRoom = (myRoomname) => {\n    const chat = {\n      myRoomname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\",\n    };\n    chat.myRoomname = myRoomname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the myRoom`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n\n    firebase\n      .database()\n      .ref(\"myRoomusers/\")\n      .orderByChild(\"myRoomname\")\n      .equalTo(myRoomname)\n      .on(\"value\", (resp) => {\n        let myRoomuser = [];\n        myRoomuser = snapshotToArray(resp);\n        const user = myRoomuser.find((x) => x.nickName === nickName);\n        if (user !== undefined) {\n          const userRef = firebase.database().ref(\"myRoomusers/\" + user.key);\n          userRef.update({ status: \"online\" });\n        } else {\n          const newmyRoomuser = { myRoomname: \"\", nickname: \"\", status: \"\" };\n          newmyRoomuser.myRoomname = myRoomname;\n          newmyRoomuser.nickName = nickName;\n          newmyRoomuser.status = \"online\";\n          const newmyRoomUser = firebase.database().ref(\"myRoomusers/\").push();\n          newmyRoomUser.set(newmyRoomuser);\n        }\n      });\n\n    history.push(\"/chatmyRoom/\" + myRoomname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return (\n    <div className={classes.mainContainer}>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Typography variant=\"h3\">Welcome to IPL Auction </Typography>\n        <div className={classes.innerContainer}>\n          <TextField\n            label=\"Name\"\n            variant=\"outlined\"\n            fullWidth\n            required={true}\n            InputLabelProps={{ shrink: true }}\n            value={mymyRoom}\n            onChange={(e) => {\n              setMymyRoom(e.target.value);\n            }}\n          />\n\n          <Button\n            className={classes.submitButton}\n            color=\"primary\"\n            onClick={handleSubmit}\n            fullWidth\n          >\n            Join\n          </Button>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default JoinmyRoom;\n\n/*\n{myRoom.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmyRoom(item.myRoomname) }}>{item.myRoomname}</ListGroupItem>\n                    ))}\n                */\n"]},"metadata":{},"sourceType":"module"}