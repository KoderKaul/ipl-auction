{"ast":null,"code":"var _jsxFileName = \"/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./Joinmy.styles\";\nimport { Typography, TextField, Container, Button } from \"@material-ui/core\";\n\nfunction Joinmy() {\n  _s();\n\n  const classes = useStyles();\n  const [my, setmy] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase.database().ref(\"mys/\").on(\"value\", resp => {\n        setmy([]);\n        setmy(snapshotToArray(resp));\n        setShowLoading(false);\n      });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = snapshot => {\n    const returnArr = [];\n    snapshot.forEach(childSnapshot => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n    return returnArr;\n  };\n\n  const enterChatmy = myname => {\n    const chat = {\n      myname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\"\n    };\n    chat.myname = myname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the my`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n    firebase.database().ref(\"myusers/\").orderByChild(\"myname\").equalTo(myname).on(\"value\", resp => {\n      let myuser = [];\n      myuser = snapshotToArray(resp);\n      const user = myuser.find(x => x.nickName === nickName);\n\n      if (user !== undefined) {\n        const userRef = firebase.database().ref(\"myusers/\" + user.key);\n        userRef.update({\n          status: \"online\"\n        });\n      } else {\n        const newmyuser = {\n          myname: \"\",\n          nickname: \"\",\n          status: \"\"\n        };\n        newmyuser.myname = myname;\n        newmyuser.nickName = nickName;\n        newmyuser.status = \"online\";\n        const newmyUser = firebase.database().ref(\"myusers/\").push();\n        newmyUser.set(newmyuser);\n      }\n    });\n    history.push(\"/chatmy/\" + myname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.mainContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, \"Welcome to IPL Auction \"), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.innerContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    label: \"Name\",\n    variant: \"outlined\",\n    fullWidth: true,\n    required: true,\n    InputLabelProps: {\n      shrink: true\n    },\n    value: mymy,\n    onChange: e => {\n      setMymy(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classes.submitButton,\n    color: \"primary\",\n    onClick: handleSubmit,\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Join\"))));\n}\n\n_s(Joinmy, \"cRUHw/p0x8l6zdyOJ/Q3J+KVMFQ=\", false, function () {\n  return [useStyles, useHistory];\n});\n\n_c = Joinmy;\nexport default Joinmy;\n/*\n{my.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmy(item.myname) }}>{item.myname}</ListGroupItem>\n                    ))}\n                */\n\nvar _c;\n\n$RefreshReg$(_c, \"Joinmy\");","map":{"version":3,"sources":["/home/proxin/React/react-js-chat-webapp-example/src/components/JoinRoom/JoinRoom.js"],"names":["React","useState","useEffect","Link","useHistory","Moment","firebase","useStyles","Typography","TextField","Container","Button","Joinmy","classes","my","setmy","showLoading","setShowLoading","nickName","setNickName","history","fetchData","localStorage","getItem","database","ref","on","resp","snapshotToArray","snapshot","returnArr","forEach","childSnapshot","item","val","key","push","enterChatmy","myname","chat","message","date","type","Date","format","newMessage","set","orderByChild","equalTo","myuser","user","find","x","undefined","userRef","update","status","newmyuser","nickname","newmyUser","logout","removeItem","mainContainer","innerContainer","shrink","mymy","e","setMymy","target","value","submitButton","handleSubmit"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Moment from \"moment\";\nimport firebase from \"../../Firebase\";\nimport useStyles from \"./Joinmy.styles\";\nimport { Typography, TextField, Container, Button } from \"@material-ui/core\";\n\nfunction Joinmy() {\n  const classes = useStyles();\n  const [my, setmy] = useState([]);\n  const [showLoading, setShowLoading] = useState(true);\n  const [nickName, setNickName] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setNickName(localStorage.getItem(\"nickName\"));\n      firebase\n        .database()\n        .ref(\"mys/\")\n        .on(\"value\", (resp) => {\n          setmy([]);\n          setmy(snapshotToArray(resp));\n          setShowLoading(false);\n        });\n    };\n\n    fetchData();\n  }, []);\n\n  const snapshotToArray = (snapshot) => {\n    const returnArr = [];\n\n    snapshot.forEach((childSnapshot) => {\n      const item = childSnapshot.val();\n      item.key = childSnapshot.key;\n      returnArr.push(item);\n    });\n\n    return returnArr;\n  };\n\n  const enterChatmy = (myname) => {\n    const chat = {\n      myname: \"\",\n      nickName: \"\",\n      message: \"\",\n      date: \"\",\n      type: \"\",\n    };\n    chat.myname = myname;\n    chat.nickName = nickName;\n    chat.date = Moment(new Date()).format(\"DD/MM/YYYY HH:mm:ss\");\n    chat.message = `${nickName} enter the my`;\n    chat.type = \"join\";\n    const newMessage = firebase.database().ref(\"chats/\").push();\n    newMessage.set(chat);\n\n    firebase\n      .database()\n      .ref(\"myusers/\")\n      .orderByChild(\"myname\")\n      .equalTo(myname)\n      .on(\"value\", (resp) => {\n        let myuser = [];\n        myuser = snapshotToArray(resp);\n        const user = myuser.find((x) => x.nickName === nickName);\n        if (user !== undefined) {\n          const userRef = firebase.database().ref(\"myusers/\" + user.key);\n          userRef.update({ status: \"online\" });\n        } else {\n          const newmyuser = { myname: \"\", nickname: \"\", status: \"\" };\n          newmyuser.myname = myname;\n          newmyuser.nickName = nickName;\n          newmyuser.status = \"online\";\n          const newmyUser = firebase.database().ref(\"myusers/\").push();\n          newmyUser.set(newmyuser);\n        }\n      });\n\n    history.push(\"/chatmy/\" + myname);\n  };\n\n  const logout = () => {\n    localStorage.removeItem(\"nickName\");\n    history.push(\"/login\");\n  };\n\n  return (\n    <div className={classes.mainContainer}>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <Typography variant=\"h3\">Welcome to IPL Auction </Typography>\n        <div className={classes.innerContainer}>\n          <TextField\n            label=\"Name\"\n            variant=\"outlined\"\n            fullWidth\n            required={true}\n            InputLabelProps={{ shrink: true }}\n            value={mymy}\n            onChange={(e) => {\n              setMymy(e.target.value);\n            }}\n          />\n\n          <Button\n            className={classes.submitButton}\n            color=\"primary\"\n            onClick={handleSubmit}\n            fullWidth\n          >\n            Join\n          </Button>\n        </div>\n      </Container>\n    </div>\n  );\n}\n\nexport default Joinmy;\n\n/*\n{my.map((item, idx) => (\n                        <ListGroupItem key={idx} action onClick={() => { enterChatmy(item.myname) }}>{item.myname}</ListGroupItem>\n                    ))}\n                */\n"]},"metadata":{},"sourceType":"module"}